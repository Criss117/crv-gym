---
import HeaderSectionUi from "./header-section.ui";
import supplementsApi from "@lib/supplements.api";
import implementsApi from "@lib/implements.api";
import NavigationMenu from "./header-nav-menu.ui/navigation-menu";
import SheetMenu from "./header-nav-menu.ui/sheet";

const href = Astro.url.pathname === "/" ? "#" : "/";
const supplementCategories = await supplementsApi.getSupplementCategories();
const implementsCategories = await implementsApi.getImplementCategories();
---

<header class="bg-background shadow-lg w-full top-0 z-40 h-26 fixed">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
    <div class="flex items-center justify-between h-full">
      <div class="flex items-center space-x-4 md:w-3/12">
        <h1
          class="text-2xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent cursor-pointer"
        >
          <a href={href}>
            <span class="hidden lg:block">CR-GYM</span>
            <span class="lg:hidden">CG</span>
          </a>
        </h1>
      </div>

      <div
        class="md:w-1/2 space-y-2 flex items-center gap-x-2 md:flex-col md:gap-x-0"
      >
        <HeaderSectionUi.SearchBar />
        <div class="md:hidden">
          <SheetMenu.Root
            client:only
            supplementCategories={supplementCategories}
            implementsCategories={implementsCategories}
          >
            <SheetMenu.Root
              slot="fallback"
              supplementCategories={supplementCategories}
              implementsCategories={implementsCategories}
            />
          </SheetMenu.Root>
        </div>
        <div class="hidden md:block">
          <NavigationMenu.Root
            client:only
            supplementCategories={supplementCategories}
            implementsCategories={implementsCategories}
          >
            <NavigationMenu.Root
              slot="fallback"
              supplementCategories={supplementCategories}
              implementsCategories={implementsCategories}
            />
          </NavigationMenu.Root>
        </div>
      </div>

      <div class="flex items-center gap-x-4 md:w-3/12 justify-end">
        <HeaderSectionUi.Cart client:only>
          <HeaderSectionUi.CartSkeleton slot="fallback" />
        </HeaderSectionUi.Cart>
      </div>
    </div>
  </div>
</header>
